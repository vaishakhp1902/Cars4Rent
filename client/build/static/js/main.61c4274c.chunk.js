(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{209:function(e,t,c){},210:function(e,t,c){},302:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(31),s=c.n(r),a=c(312),o=c(193),i=(c(209),c(72)),l=c(66),j=c(29),b=(c(210),c(59)),d=c(315),u=c(308),O=c(309),h=c(318),m=c(50),x=c(7);var p=function(e){var t=JSON.parse(localStorage.getItem("user")),c=Object(x.jsxs)(d.a,{children:[Object(x.jsx)(d.a.Item,{children:"Home"}),Object(x.jsx)(d.a.Item,{children:"My bookings"}),Object(x.jsx)(d.a.Item,{children:"Profile"}),Object(x.jsx)(d.a.Item,{onClick:function(){localStorage.removeItem("user"),window.location.href="/login"},children:Object(x.jsx)("l1",{children:"Logout"})})]});return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"header bs1",children:Object(x.jsx)(u.a,{gutter:16,justify:"center",children:Object(x.jsx)(O.a,{lg:20,sm:24,xs:24,children:Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsx)("h1",{children:"Cars4Rent"}),Object(x.jsx)(h.a,{overlay:c,placement:"bottomCenter",children:Object(x.jsx)(m.a,{children:t.username})})]})})})}),Object(x.jsx)("div",{className:"content",children:e.children})]})},f=c(43),g=c(55),y=c.n(g),v=c(76),N=c(77),w=c.n(N),D=function(){return function(){var e=Object(v.a)(y.a.mark((function e(t){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING",payload:!0}),e.prev=1,e.next=4,w.a.get("/api/cars/getallcars");case 4:c=e.sent,t({type:"GET_ALL_CARS",payload:c.data}),t({type:"LOADING",payload:!1}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:"LOADING",payload:!1});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},M=c(311),k=c(310),S=c(317),H=c(316),I=c(37),L=c.n(I),C=c(195),A=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(c){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"LOADING",payload:!0}),t.prev=1,t.next=4,w.a.post("/api/bookings/bookcar",e);case 4:t.sent,c({type:"LOADING",payload:!1}),C.b.success("Your Car is booked successfully"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),c({type:"LOADING",payload:!1}),C.b.error("Something Went Wrong please try Later");case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},R=c(188),T=c.n(R),P=M.a.RangePicker;var G=function(e){var t=e.match,c=Object(f.c)((function(e){return e.carsReducer})).cars,r=Object(n.useState)({}),s=Object(b.a)(r,2),a=s[0],o=s[1],i=Object(f.b)(),l=Object(n.useState)(),j=Object(b.a)(l,2),d=j[0],h=j[1],m=Object(n.useState)(),g=Object(b.a)(m,2),y=g[0],v=g[1],N=Object(n.useState)(0),w=Object(b.a)(N,2),M=w[0],I=w[1],C=Object(n.useState)(!1),R=Object(b.a)(C,2),G=R[0],B=R[1],F=Object(n.useState)(0),_=Object(b.a)(F,2),q=_[0],E=_[1],J=Object(n.useState)(!1),Y=Object(b.a)(J,2),W=Y[0],K=Y[1];return Object(n.useEffect)((function(){0===c.length?i(D()):o(c.find((function(e){return e._id===t.params.carid})))}),[c]),Object(n.useEffect)((function(){E(M*a.rentPerHour),G&&E(q+30*M)}),[G,M]),Object(x.jsx)(p,{children:Object(x.jsxs)(u.a,{justify:"center",className:"d-flex align-items-center",style:{minHeight:"80vh"},children:[Object(x.jsx)(O.a,{lg:10,sm:24,xs:24,children:Object(x.jsx)("img",{src:a.image,className:"carimg2  bs1",alt:""})}),Object(x.jsxs)(O.a,{lg:10,sm:24,xs:24,children:[Object(x.jsx)(k.a,{type:"horizontal",dashed:!0,children:"Car Details"}),Object(x.jsxs)("div",{className:"text-right",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"name: "}),a.name]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Rent: "}),a.rentPerHour," per Hour"]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Fuel: "}),a.fuelType]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Max Capacity:"})," ",a.capacity]})]}),Object(x.jsx)(k.a,{type:"horizontal",dashed:!0,children:"Select Timeslots"}),Object(x.jsx)(P,{showTime:{format:"HH:mm"},format:"MMM DD YYYY HH mm",onChange:function(e){console.log(L()(e[0]).format("MMM DD yyyy HH:MM")),console.log(L()(e[1]).format("MMM DD yyyy HH:MM")),h(L()(e[0]).format("MMM DD yyyy HH:MM")),v(L()(e[1]).format("MMM DD yyyy HH:MM")),I(e[1].diff(e[0],"hours"))}}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{className:"btn1 mt-2",onClick:function(){K(!0)},children:"See Booked Slots"}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Total Hours :"}),M]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Rent per hour : "}),a.rentPerHour]}),Object(x.jsx)(S.a,{onChange:function(e){e.target.checked?B(!0):B(!1)},children:"Driver Required ?"}),Object(x.jsxs)("h3",{children:["Total Amount : ",q]}),Object(x.jsx)(T.a,{shippingAddress:!0,token:function(e){var t={token:e,user:JSON.parse(localStorage.getItem("user"))._id,car:a._id,totalHours:M,totalAmount:q,driverRequired:G,bookedTimeSlots:{from:d,to:y}};i(A(t))},currency:"inr",amount:100*q,stripeKey:"pk_test_51JvxeCSFg7lM6Ut9uPKeDQ0f9umkCe6QqJX3BDp40BHR5A0vN3sM1oLQ7dImoaFA7n8dWcJjKW0FDjYNNoDUvLF500yovwbKN0",children:Object(x.jsx)("button",{className:"btn-1",children:"Book Now"})})]})]}),a.name&&Object(x.jsx)(H.a,{visible:W,closable:!1,footer:!1,title:"Booked time slots",children:Object(x.jsxs)("div",{className:"p-2",children:[a.bookedTimeSlots.map((function(e){return Object(x.jsxs)("button",{className:"btn1 mt-2",children:[e.from," - ",e.to]})})),Object(x.jsx)("div",{className:"text-right mt-5",children:Object(x.jsx)("button",{className:"btn1",onClick:function(){K(!1)},children:"CLOSE"})})]})})]})})},B=c(157),F=M.a.RangePicker;var _=function(){var e=Object(f.c)((function(e){return e.carsReducer})).cars,t=Object(n.useState)([]),c=Object(b.a)(t,2),r=c[0],s=c[1],a=Object(f.b)();return Object(n.useEffect)((function(){a(D())})),Object(n.useEffect)((function(){s(e)}),[e]),Object(x.jsxs)(p,{children:[Object(x.jsx)(u.a,{className:"mt-3",justify:"center",children:Object(x.jsx)(O.a,{lg:20,sm:24,className:"d-flex justify-content-left",children:Object(x.jsx)(F,{onChange:function(t){var c,n=L()(t[0],"MMM DD yyyy HH:mm"),r=L()(t[1],"MMM DD yyyy HH:mm"),a=[],o=Object(B.a)(e);try{for(o.s();!(c=o.n()).done;){var i=c.value;if(0===i.bookedTimeSlots.length)a.push(i);else{var l,j=Object(B.a)(i.bookedTimeSlots);try{for(j.s();!(l=j.n()).done;){var b=l.value;n.isBetween(b.from,b.to)||r.isBetween(b.from,b.to)||L()(b.from).isBetween(n,r)||L()(b.to).isBetween(n,r)||a.push(i)}}catch(d){j.e(d)}finally{j.f()}}}}catch(d){o.e(d)}finally{o.f()}s(a)},showTime:{format:"HH:mm"},format:"MMM DD yyyy HH:mm"})})}),Object(x.jsx)(u.a,{justify:"center",gutter:16,className:"mt-5",children:r.map((function(e){return Object(x.jsx)(O.a,{lg:5,sm:24,xs:24,children:Object(x.jsxs)("div",{className:"car p-2 bs1",children:[Object(x.jsx)("img",{src:e.image,className:"car-img",alt:""}),Object(x.jsxs)("div",{className:"car-content d-flex align-items-center justify-content-between",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:e.name}),Object(x.jsxs)("p",{children:[e.rentPerHour," Rent per hour"]})]}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn-1 mr-2",children:Object(x.jsx)(l.b,{to:"/booking/".concat(e._id),children:" Book Now"})})})]})]})})}))})]})},q=c(313),E=c(314);var J=function(){var e=Object(f.b)();return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)(u.a,{gutter:16,children:[Object(x.jsx)(O.a,{lg:16,style:{position:"relative"},children:Object(x.jsx)("h1",{className:"login-logo",children:"Cars4Rent"})}),Object(x.jsx)(O.a,{lg:8,className:"text-left p-5",children:Object(x.jsxs)(q.a,{layout:"vertical",className:"login-form p-5",onFinish:function(t){var c;e((c=t,function(){var e=Object(v.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING",payload:!0}),e.prev=1,e.next=4,w.a.post("/api/users/login",c);case 4:n=e.sent,localStorage.setItem("user",JSON.stringify(n.data)),C.b.success("Login success"),t({type:"LOADING",payload:!1}),setTimeout((function(){window.location.href="/"}),500),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),C.b.error("Something went wrong"),t({type:"LOADING",payload:!1});case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsx)("hr",{}),Object(x.jsx)(q.a.Item,{name:"username",label:"Username",rules:[{required:!0}],children:Object(x.jsx)(E.a,{})}),Object(x.jsx)(q.a.Item,{name:"password",label:"Password",rules:[{required:!0}],children:Object(x.jsx)(E.a.Password,{})}),Object(x.jsx)("button",{className:"btn-1",children:"Login"}),Object(x.jsx)("hr",{}),Object(x.jsx)(l.b,{to:"/register",children:"Dont have an account? Click here"})]})})]})})};var Y=function(){var e=Object(f.b)();return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)(u.a,{gutter:16,children:[Object(x.jsx)(O.a,{lg:16,style:{position:"relative"},children:Object(x.jsx)("h1",{className:"login-logo",children:"Cars4Rent"})}),Object(x.jsx)(O.a,{lg:8,className:"text-left p-5",children:Object(x.jsxs)(q.a,{layout:"vertical",className:"login-form p-5",onFinish:function(t){var c;e((c=t,function(){var e=Object(v.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING",payload:!0}),e.prev=1,e.next=4,w.a.post("/api/users/register",c);case 4:e.sent,C.b.success("Registration successfull"),setTimeout((function(){window.location.href="/login"}),500),t({type:"LOADING",payload:!1}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),C.b.error("Something went wrong"),t({type:"LOADING",payload:!1});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(x.jsx)("h1",{children:"Register"}),Object(x.jsx)("hr",{}),Object(x.jsx)(q.a.Item,{name:"username",label:"Username",rules:[{required:!0}],children:Object(x.jsx)(E.a,{})}),Object(x.jsx)(q.a.Item,{name:"password",label:"Password",rules:[{required:!0}],children:Object(x.jsx)(E.a.Password,{})}),Object(x.jsx)(q.a.Item,{name:"cpassword",label:"Confirm Password",rules:[{required:!0}],children:Object(x.jsx)(E.a.Password,{})}),Object(x.jsx)("button",{className:"btn-1 mt-2 mb-3",children:"Register"}),Object(x.jsx)("br",{}),Object(x.jsx)(l.b,{to:"/login",children:"Click here to Login"})]})})]})})};c(301);var W=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(l.a,{children:[Object(x.jsx)(K,{path:"/",exact:!0,component:_}),Object(x.jsx)(j.b,{path:"/login",exact:!0,component:J}),Object(x.jsx)(j.b,{path:"/register",exact:!0,component:Y}),Object(x.jsx)(K,{path:"/booking/:carid",exact:!0,component:G})]})})};function K(e){return localStorage.getItem("user")?Object(x.jsx)(j.b,Object(i.a)({},e)):Object(x.jsx)(j.a,{to:"/login"})}var U=c(108),Q=c(191),z=c(192),X={cars:[]},V={loading:!1},Z=Object(Q.composeWithDevTools)({}),$=Object(U.combineReducers)({carsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;return"GET_ALL_CARS"===t.type?Object(i.a)(Object(i.a)({},e),{},{cars:t.payload}):e},alertsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;return"LOADING"===t.type?Object(i.a)(Object(i.a)({},e),{},{loading:t.payload}):e}}),ee=Object(U.createStore)($,Z(Object(U.applyMiddleware)(z.a))),te=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,319)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),s(e),a(e)}))};a.a({dsn:"https://1b0a949e7e8044cdbef56edae4db4dbb@o1084969.ingest.sentry.io/6095286",integrations:[new o.a.BrowserTracing],tracesSampleRate:1}),s.a.render(Object(x.jsx)(f.a,{store:ee,children:Object(x.jsx)(W,{})}),document.getElementById("root")),te()}},[[302,1,2]]]);
//# sourceMappingURL=main.61c4274c.chunk.js.map